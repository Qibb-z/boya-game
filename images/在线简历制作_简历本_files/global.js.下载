var context={fontsize:$("#field-list").attr("fontsize")||"15px",fontcolor:$("#field-list").attr("fontcolor")||"666666",fontfamily:$("#field-list").attr("fontfamily")||"Helvetica Neue",linespace:$("#field-list").attr("linespace")||"1.6em",blockspace:$("#field-list").attr("blockspace")||"20px",resumeMd5:null,coverMd5:null,letterMd5:null,autoSaveHandle:null,timeDownHandle:null,hasSavedToServer:true,saveTimeDown:30,saveToServerLoading:function(){$(".header-top-center i.layui-icon-saved").hide();$(".header-top-center i.layui-anim-loop").css("display","inline-block");$(".header-top-center .resume-autosave").text("正在保存...");$(".header-top-center #operate-save").css("display","none");clearInterval(this.timeDownHandle);clearTimeout(this.autoSaveHandle);this.saveTimeDown=30},savedToServer:function(a){if(!context.user){layer.msg("请先登录");return false}if("boolean"!==typeof a){layer.msg("保存失败");return false}if(a){if(!this.hasSavedToServer){$(".header-top-center .resume-status").hide();$(".header-top-center i.layui-icon-saved").show();$(".header-top-center i.layui-anim-loop").hide();$(".header-top-center .resume-autosave").text(context.now()+" 已保存");$(".header-top-center #operate-save").css("display","none");this.hasSavedToServer=true}}else{$(".header-top-center .resume-status").show();$(".header-top-center i.layui-icon-saved").hide();$(".header-top-center i.layui-anim-loop").hide();$(".header-top-center .resume-autosave").text("30s 后自动保存");$(".header-top-center #operate-save").css("display","inline-block");this.hasSavedToServer=false;if(this.timeDownHandle){clearTimeout(this.timeDownHandle);this.saveTimeDown=30}this.timeDownHandle=setInterval(function(){context.saveTimeDown--;if(0==context.saveTimeDown){clearInterval(this.timeDownHandle)}$(".header-top-center .resume-autosave").text(context.saveTimeDown+"s 后自动保存")},1500);if(this.autoSaveHandle){clearTimeout(this.autoSaveHandle)}this.autoSaveHandle=setTimeout(function(){if(context.user&&!context.hasSavedToServer){var b=context.getResumeContent();var c=$.md5(b);if(context.resumeMd5!=c){context.saveResumeData(b,function(){context.resumeMd5=c})}else{context.saveToServerLoading();context.savedToServer(true)}}},30*1500)}},historyBakArr:[],historyBak:function(a){a.time=this.now();a.cancel=false;this.historyBakArr.push(a);historyPanelRender();$("#resume-his span.layui-badge").text(this.historyBakArr.length).show()},print:function(b,a){if(window.opera){this.createPrintWindow(b,a);return}this.gPrintFrame=this.createPrintIframe(b,a);var c=this;this.gPrintFrame.onload=function(){c.gPrintFrame.contentWindow.focus();c.gPrintFrame.contentWindow.print()}},gPrintFrame:null,createPrintIframe:function(content,style){var iframe=document.getElementById("print-iframe");if(!iframe){iframe=document.createElement("iframe");iframe.id="print-iframe";with(iframe.style){position="absolute";left="-10000px";top="-10000px"}document.body.appendChild(iframe)}var html="";html+="<!DOCTYPE html><html><head>";html+=style;html+="</head><body>";html+=content;html+="</body></html>";var doc=iframe.contentWindow.document;doc.open();doc.write(html);doc.close();return iframe},createPrintWindow:function(c,b){var e=window.open("");var a="";a+="<!DOCTYPE html><html><head>";a+=b;a+='</head><body onload="window.print(); window.opener=self; self.close();">';a+=c;a+="</body></html>";var d=e.document;d.open();d.write(a);d.close();return e},now:function(){var b=new Date();var e=b.getFullYear();var f=b.getMonth()+1<10?"0"+(b.getMonth()+1):b.getMonth()+1;var d=b.getDate()<10?"0"+b.getDate():b.getDate();var a=b.getHours()<10?"0"+b.getHours():b.getHours();var g=b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes();var c=b.getSeconds()<10?"0"+b.getSeconds():b.getSeconds();return a+":"+g},cookie:{set:function(c,d,a){var b=new Date();b.setTime(b.getTime()+a*24*3600*1000);document.cookie=c+"="+d+((a==null)?"":";expires="+b.toGMTString())+";path=/"},get:function(e){var c=document.cookie.replace(/[ ]/g,"");var f=c.split(";");var b;for(var d=0;d<f.length;d++){var a=f[d].split("=");if(e==a[0]){b=a[1];break}}return b},del:function(b){var a=new Date();a.setTime(a.getTime()-10000);document.cookie=b+"=v;expires="+a.toGMTString()}},blocktitle:{zh:{baseinfo:"基本信息",intention:"求职意向",education:"教育背景",work:"工作经历",practice:"实践经历",project:"项目经历",honer:"荣誉奖项",hobby:"兴趣爱好",skill:"专业技能",evaluation:"自我评价"},en:{baseinfo:"Summary",intention:"Intention",education:"Education",work:"Careers",practice:"Practices",project:"Projects",honer:"Honors",hobby:"Hobbies",skill:"Skills",evaluation:"Evaluation"}},skilllevel:{zh:{average:"了解",good:"掌握",advanced:"熟练",expert:"精通"},en:{average:"Average",good:"Good",advanced:"Advanced",expert:"Expert"}},trace:function(b){if(b&&("undefined"!=typeof _hmt)){var a=b.split("-");if(a.length>=3){console.log("trace=>"+b);_hmt.push(["_trackEvent",a[0],a[1],a[2]])}}},pv:function(a){if(a&&("undefined"!=typeof _hmt)){console.log("pv=>"+a);_hmt.push(["_trackPageview",a])}},err:function(a){$.get(context.host+"common/errorlog",{msg:a},function(b){})}};window.console=window.console||(function(){var a={};a.log=a.warn=a.debug=a.info=a.error=a.time=a.dir=a.profile=a.clear=a.exception=a.trace=a.assert=function(){};return a})();$("body").on("click",".jlb-login-link",function(){if($(this).attr("data-uid")){location.href=context.host+"profile";return false}var d='<div id="login-weixin">';d+='<div class="login-header" style="height: 50px;line-height: 50px;text-align: left;font-size: 20px;margin-top: -10px;padding-left: 10px;">微信扫码登录';d+='<a href="javascript:void(0);" style="position: absolute;right: 30px;font-size: 14px;color: #1E9FFF;"><i class="layui-icon" style="font-size: 13px;">&#xe678;</i>手机账号登录&gt;</a>';d+="</div>";d+='<div class="login-body" style="text-align: center;">';d+='<div class="login-qrcode" style="width:220px;height:220px;margin:18px auto;background:url('+context.res+'lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat;border:1px #eee solid;"></div>';d+='<span style="display: block; margin-top: -12px; font-size: 12px; color: #666;">可在电脑和微信同步编辑简历</span>';d+="</div>";d+="</div>";d+='<div id="login-phone" style="display: none;">';d+='<div class="login-header" style="height: 50px;line-height: 50px;text-align: left;font-size: 20px;margin-top: -10px;padding-left: 10px;">手机账号登录';d+='<a href="javascript:void(0);" style="position: absolute;right: 30px;font-size: 14px;color: #1E9FFF;"><i class="layui-icon" style="font-size: 14px;">&#xe677;</i>微信扫码登录&gt;</a>';d+="</div>";d+='<div class="login-body" style="text-align: center;margin-top:40px;">';d+='<form class="layui-form" lay-filter="cvoptions" action="">';d+='<div class="layui-inline" style="margin:10px 0px;">';d+='<div class="layui-input-inline" style="margin:0px;width:280px">';d+='<input type="text" name="login_phone" lay-verify="limit" placeholder="输入手机号" class="layui-input" style="background:url('+context.res+'images/ico_login_phone.png) 5px center no-repeat; background-size: 18px; padding-left: 35px;">';d+="</div>";d+="</div>";d+='<div class="layui-inline" style="margin:10px 0px;">';d+='<div class="layui-input-inline" style="margin:0px;width:280px">';d+='<input type="text" name="login_code" lay-verify="limit" placeholder="短信验证码" class="layui-input" style="background:url('+context.res+'images/ico_login_code.png) 5px center no-repeat; background-size: 18px; padding-left: 35px;">';d+="</div>";d+='<label class="layui-form-label" style="border:none;background:none;position:absolute;right:0px;top:0px;cursor:pointer;width:95px;font-size:13px;">发送验证码</label>';d+="</div>";d+="</form>";d+='<button class="layui-btn layui-btn-normal" style="width:280px;margin-top:20px;">登录</button>';d+="</div>";d+="</div>";d+='<div class="login-footer" style="background:#f5f5f5;color:#888;position: absolute;left:0;right:0;bottom:0;text-align:center;height:50px;line-height:50px;font-size: 13px;">微博/QQ老用户登录后在「个人中心 &gt; 账号设置」绑定老账号</div>';var c=null;var g=null;var b=60;var a=0.5;var f=true;var e=2;if(-1!=location.href.indexOf("account/login")){a=0;f=false;var e=0}layer.open({type:1,title:"",content:d,anim:e,shade:a,area:["460px","400px"],closeBtn:false,shadeClose:f,success:function(k,i){k.find(".layui-layer-content").css("overflow","hidden");$.post(context.host+"weixin/getqrcode",{},function(l){try{l=$.parseJSON(l);if(0==l.retCode){k.find(".login-qrcode").html("<img src="+l.data.qrcode+' style="width:100%;height:100%;">');k.find("#login-weixin").data("scene_id",l.data.scene_id);c=setInterval(h,1200)}else{layer.msg("二维码加载失败")}}catch(m){layer.msg("二维码加载失败")}}).error(function(){layer.msg("二维码加载失败")});function h(){$.post(context.host+"account/wxmplogin",{scene_id:k.find("#login-weixin").data("scene_id")},function(l){try{l=$.parseJSON(l);if(0==l.retCode){layer.msg("登录成功");clearInterval(c);setTimeout(function(){location.reload()},1000)}else{if(-1==l.retCode){layer.msg("登录失败")}else{if(-2==l.retCode){layer.msg("请重新扫码")}}}}catch(m){layer.msg("登录失败")}}).error(function(){layer.msg("登录失败")})}if(-1==location.href.indexOf("account/login")){setTimeout(function(){clearInterval(c);layer.close(i)},3*60*1000)}k.find("#login-weixin .login-header a").click(function(){$("#login-weixin").slideUp(200);$("#login-phone").slideDown(200);if(c){clearInterval(c)}});k.find("#login-phone .login-header a").click(function(){$("#login-phone").slideUp(200);$("#login-weixin").slideDown(200);if(k.find("#login-weixin").data("scene_id")){c=setInterval(h,1200)}});k.find("#login-phone .layui-form label").click(function(){$this=$(this);var l=k.find('input[name="login_phone"]').val();if($this.data("sended")){return false}if(!(/^1[3456789]\d{9}$/.test(l))){layer.msg("手机格式不正确");return false}$this.data("sended",true);$this.html('<font color="#666">60s后重新发送</font>');$this.css("cursor","auto");g=setInterval(function(){b--;if(0==b){$this.data("sended","");$this.html("发送验证码");$this.css("cursor","pointer");b=60;clearInterval(g)}else{$this.html('<font color="#666">'+b+"s后重新发送</font>")}},1200);$.post(context.host+"account/sendcode",{phone:l},function(m){console.log(m);try{m=$.parseJSON(m);if(0==m.retCode){}else{layer.msg(m.retText)}}catch(n){layer.msg("发送失败")}}).error(function(){layer.msg("发送失败")})});k.find("#login-phone .login-body button").click(function(){j()});k.find('input[name="login_code"]').keyup(function(l){if(l.keyCode==13){j()}});function j(){var m=k.find('input[name="login_phone"]').val();var l=k.find('input[name="login_code"]').val();if(!(/^1[3456789]\d{9}$/.test(m))){layer.msg("手机格式不正确");return false}if(!(/^\d{6}$/.test(l))){layer.msg("验证码格式不正确");return false}$.post(context.host+"account/smslogin",{phone:m,code:l},function(n){try{n=$.parseJSON(n);if(0==n.retCode){layer.msg("登录成功");setTimeout(function(){location.reload()},1000)}else{layer.msg(n.retText)}}catch(o){layer.msg("登录失败")}}).error(function(){layer.msg("登录失败")})}},end:function(){clearInterval(c);clearTimeout(g);b=60}});context.trace("common-login-loginopen")});$("body").on("click","#vip-btn, #vip-link, #jlb-vip-btn",function(){if(!context.user){layer.msg("请先登录");return false}if("life"==context.vip){layer.msg("您已是超级VIP");return false}layer.open({type:1,title:"升级VIP",content:$("#vip-panel"),shadeClose:true,area:["870px","670px"],success:function(b,a){context.pv("/vip/vipopen")},});if(/MicroMessenger/.test(navigator.userAgent)){$('#vip-panel form[name="vipForm"]').attr("method","get")}});$("#vip-panel .vip-box-btn .pay-btn-ali").click(function(){layer.closeAll();layer.open({type:1,title:false,closeBtn:false,area:"300px",shade:0.7,resize:false,btn:["支付完成"],btnAlign:"c",content:'<p style="text-align:center;">支付成功后可在<a href="'+context.host+'profile#order" style="color:#1e9fff;text-decoration:underline;">个人中心</a>查看支付记录</p>',success:function(b,a){context.pv("/vip/vipalipay")},yes:function(){context.pv("/vip/vipalipaysucc");location.reload()}});$('#vip-panel form[name="vipForm"]').submit()});$("#vip-panel .vip-box-btn .pay-btn-wx").click(function(){var c="";var e="";var d=layer.open({type:1,title:"微信支付",content:"",shadeClose:true,btnAlign:"c",area:["400px","330px"],success:function(g,f){g.find(".layui-layer-title").css("border-bottom","none");g.find(".layui-layer-content").css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center 110px no-repeat");$.ajax({type:"post",url:"/payment/wxpay",data:$('#vip-panel form[name="vipForm"]').serialize(),async:true,dataType:"json",success:function(i){g.find(".layui-layer-content").css("background","");if(i.retCode==0){c=i.data.qr;e=i.data.order_id;var h='<img style="width:200px;height:200px;display:block;margin:0 auto;border:1px #f0f0f0 solid;" src="'+c+'"></img><p style="text-align:center;margin-top:10px;">打开微信扫描二维码支付：￥<font color="#f60"><b>'+i.data.amount+"</b></font></p>";g.find(".layui-layer-content").html(h)}else{layer.msg(i.retText);setTimeout(function(){layer.close(f);clearInterval(b)},1000)}},error:function(){layer.msg("支付失败，服务器异常")}});context.pv("/vip/vipwxpay")},end:function(f,g){clearInterval(b)}});var a=0;var b=setInterval(function(){a++;$.ajax({type:"post",url:"/payment/queryorderstate",data:{order_id:e},async:false,dataType:"json",success:function(f){if(f.retCode==0){clearInterval(b);layer.msg("支付成功，页面刷新后生效",{time:0,btn:["立即刷新"],btnAlign:"c",shade:0.5,btn1:function(g,h){layer.close(g);location.reload()}})}}});if(a>100){clearInterval(b);layer.msg("二维码已经过期，请重新支付",{time:0,btn:["知道了"],btnAlign:"c",shade:0.5,btn1:function(f,g){layer.close(f);layer.close(d)}})}},1500)});$("#vip-panel .vip-box-btn .pay-btn-groupon").click(function(){var a='<div class="groupon-panel" style="padding: 20px;">    <p style="width: 100%;text-align: center;font-size: 15px;">邀请同学好友一起拼团简历本VIP，价格最低减半！</p>    <fieldset style="border: 1px #eee dashed; text-align: center;margin-top:30px;">        <legend style="font-size: 15px; color: #666;">拼团规则</legend>        <p style="margin:5px 0px;font-size:13px;color:#888;">2人拼团：<font color="#f60"><b>8折</b></font></p>        <p style="margin:5px 0px;font-size:13px;color:#888;">3人拼团：<font color="#f60"><b>7折</b></font></p>        <p style="margin:5px 0px;font-size:13px;color:#888;">4人拼团：<font color="#f60"><b>6折</b></font></p>        <p style="margin:5px 0px;font-size:13px;color:#888;">5人拼团：<font color="#f60"><b>5折</b></font></p>        <p style="margin:5px 0px;font-size:13px;color:#888;">5人以上：<font color="#f60"><b>5折</b></font></p>    </fieldset>    <button class="layui-btn layui-btn-normal" style="display: block;margin: 30px auto 0px auto;" data-trace="common-groupon-start">发起拼团</button></div>';layer.open({type:1,title:false,shadeClose:true,area:["430px","360px"],content:a,success:function(c,b){c.find("button").off("click").on("click",function(){layer.msg("即将上线...")})}})});var vip={vip1:{price:"9.9",amount:"9.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"},vip3:{price:"5.3",amount:"15.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"},vip6:{price:"3.4",amount:"19.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"},vip12:{price:"2.5",amount:"29.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"}};$("#vip-month .vip-time .layui-btn").click(function(){context.pv("/vip/viptime");var b=$(this).attr("value");var a=$(this).attr("expire");$(this).parent().parent().find(".vip-price font").text(vip["vip"+b]["price"]);$(this).parent().parent().find("font.vip-pdfnum").text(vip["vip"+b]["pdf"]);$(this).parent().parent().find("font.vip-wordnum").text(vip["vip"+b]["word"]);$(".vip-box-amount font b").text(vip["vip"+b]["amount"]);$('.vip-box-amount font[color="#666"]').text("（"+a+"到期）");$('#vip-panel input[name="amount"]').val(vip["vip"+b]["amount"]);$('#vip-panel input[name="title"]').val("简历本基础VIP会员");$('#vip-panel input[name="itemId"]').val("vip-month");$('#vip-panel input[name="time"]').val(b);$("#vip-month .vip-time .layui-btn").removeClass("checked");$(this).addClass("checked")});$("#vip-panel .vip-item").click(function(){if($(this).attr("id")=="common-user"){return false}$("#vip-panel .vip-item").removeClass("vip-item-curr");$(this).addClass("vip-item-curr");var a=$(this).attr("id");if("vip-month"==a){var c=$("#vip-month .vip-time .layui-btn.checked").attr("value");var b=$("#vip-month .vip-time .layui-btn.checked").attr("expire");var d=vip["vip"+c]["amount"];$("#vip-panel .vip-box-amount").html('合计金额：<font size="5" color="#f60"><b>'+d+'</b></font> 元<font color="#666">（'+b+"到期）</font>");$('#vip-panel input[name="amount"]').val(d);$('#vip-panel input[name="title"]').val("简历本基础VIP会员");$('#vip-panel input[name="itemId"]').val("vip-month")}if("vip-life"==a){context.pv("/vip/viplife");$("#vip-panel .vip-box-amount").html('合计金额：<font size="5" color="#f60"><b>39.9</b></font> 元<font color="#666">（永久有效）</font>');$('#vip-panel input[name="amount"]').val(39.9);$('#vip-panel input[name="title"]').val("简历本超级VIP会员");$('#vip-panel input[name="itemId"]').val("vip-life")}});if(layui.device().ie||/Edge/.test(navigator.userAgent)){var _browserName="Edge";if(layui.device().ie){_browserName="IE"}else{if(/Edge/.test(navigator.userAgent)){_browserName="Edge"}}layui.use("layer",function(){if(layui.device().ie&&layui.device().ie<9){layui.use("layer",function(){layer.alert("您正在使用低版本IE浏览器，将会影响简历本的操作体验，强烈建议使用Chrome、Firefox、360等更优秀的浏览器！",{title:"提示",closeBtn:false,shade:0.7},function(){location.href=context.host+"error/ie"})})}else{layer.confirm("您正在使用"+_browserName+"浏览器，Windows系统自带的IE浏览器和Edge浏览器经常存在不可描述的问题，强烈建议使用Chrome、Firefox、360等更优秀的浏览器！",{title:"提示",btn:["更换浏览器","继续使用"],closeBtn:false,shade:0.7},function(){location.href=context.host+"error/ie"})}})}layui.use("util",function(){layui.util.fixbar({bar1:"&#xe63a;",bgcolor:"#AAA",click:function(a){if(a==="bar1"){window.open("/feedback")}}})});$("body").on("click",".jlb-search",function(){context.trace("common-search-search");var c=$(this).prev().val();if(!c){layer.msg("请输入搜索内容");return false}else{var b=/[^\u4e00-\u9fa5a-zA-Z]/g;c=c.replace(b,"");if(!c){layer.msg("请输入搜索内容");return false}if(c.length>30){c=c.substring(0,30)}}var a=location.protocol+"//"+location.host;if(-1!=location.href.indexOf("/search/")){location.href=a+"/search/?q="+c}else{window.open(a+"/search/?q="+c)}});$("body").on("keyup",'input[name="search-input"]',function(a){var b=a||window.event;if(b.keyCode==13){$(".jlb-search").click()}});$("body").on("mousedown","*[data-trace]",function(){context.trace($(this).attr("data-trace"))});$("body").on("click",".jlb-btn-create",function(){var c=$(this).attr("tplkey")||context.tplkey;var b=-1!=location.href.indexOf("english")||$(this).attr("tpllang")?"&l=en":"";var a=context.host+"editor/?t="+c+b;if($(this).attr("covid")){a=a+"#cover"}location.href=a});$("body").on("click",".jlb-btn-down",function(){var c=$(this).attr("tplkey")||context.tplkey;var b=$(this).attr("tplcon")?("&c="+$(this).attr("tplcon")):"";var a=context.host+"editor/?t="+c+b;if($(this).attr("covid")){a=a+"#cover"}location.href=a});$(".mycv-link").click(function(){if(context.user){location.href=context.host+"profile"}else{$(".jlb-login-link").click()}});(function(){var b=["/muban/makecv/","/advisor/"];for(var a=1;a<=4;a++){if(-1!=location.href.indexOf(b[a-1])){$(".jlb-header .jlb-nav .layui-nav-item:eq("+a+")").addClass("layui-this");break}}})();$(".jlb-friendlinks-more").toggle(function(){$(this).parent().css("height","45px");$(this).html("展开▾")},function(){$(this).parent().css("height","auto");$(this).html("收起▴")});